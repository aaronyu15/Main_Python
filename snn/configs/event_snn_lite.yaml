# EventSNNFlowNetLite Configuration
# Newer architecture with temporal bin processing and polarity-separated inputs

# Model Configuration
model_type: 'EventSNNFlowNetLite'   # Event-aware SNN architecture
use_polarity: false                # Use separate channels for event polarities
num_bins: 5                       # Event temporal bins - controls temporal history length
bin_interval_us: 5000
base_ch: 4                        # Base number of channels in encoder

enable_logging_params: false                    # Log model parameters and statistics to TensorBoard

# Model layer setting
conv_type: 'SpikingConvBlock'
lif_type: 'QuantizedLIF'
decay: 0.5                         # LIF neuron decay factor (0-1, smaller = faster decay)
threshold: 1.0                      # LIF neuron firing threshold
reset: 0.0
alpha: 10.0                         # Surrogate gradient slope (higher = sharper)
use_norm: false
use_bias: false                      # Enable bias in convolutional layers

# Quantization Settings (now supported by EventSNNFlowNetLite)
# Note: Start with quantization OFF for baseline, or use 8-bit as starting point
quantize_weights: false              # Enable weight quantization
quantize_activations: false          # Enable activation quantization
quantize_mem: false                  # Enable membrane potential quantization
weight_bit_width: 8
act_bit_width: 8
mem_bit_width: 8

# Training Settings
num_epochs: 80                   # Faster training for prototyping
batch_size: 4                      # Larger batch for small model
val_batch_size: 4
num_workers: 4                      # Use 0 to avoid multiprocessing with h5py

# Optimizer Settings
learning_rate: 0.0005              # Higher LR for faster convergence
weight_decay: 0.01
lr_milestones: null
lr_gamma: 0.5

# Loss Weights
endpoint_weight: 0.20              # Primary EPE loss
angular_weight: 0.10               # Angular error loss
epe_ang_weight: 0.01               # Disabled - was causing spatial bias
smoothness_weight: 0.001            # Small smoothness regularization (now fixed)
vertical_weight: 0.0               # Disabled unless needed
effective_epe_weights: [0.2, 0.2, 0.1, 0.0, 0.0]  # Weights for effective EPE at different thresholds

# Data Settings
data_root: '../blink_sim/output/train_set' # Path to dataset root directory
camera_size: [320, 320]
use_events: true
max_train_samples: null             # Limit for fast prototyping
max_val_samples: null
augment_rotation: false              # Random 90° rotations (0°, 90°, 180°, 270°)
event_mask_disable_epoch: 25
disable_skip_epoch: 60

# Patch-based processing
patch_mode: false
patch_size: 64
activity_threshold: 4  # Minimum event count for patch extraction
  
# Flow clipping
flow_clip_range: null

# Training Loop Settings
grad_clip: 1.0
log_interval: 10
save_interval: 5
image_log_interval: 100

